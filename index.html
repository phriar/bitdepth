<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
  <title>BitDepth ‚Äî Bitcoin Tools & Live Market Intel</title>
  <meta name="description" content="Free Bitcoin tools: sat stack calculator, address checker, fee estimator, halving countdown, inflation comparison, regret calculator, and live on-chain data. Built for bitcoiners." />
  <meta property="og:title" content="BitDepth ‚Äî Bitcoin Tools & Live Market Intel" />
  <meta property="og:description" content="Free Bitcoin tools built for bitcoiners." />
  <meta property="og:url" content="https://bitdepth.app" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@btc_journey" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Syne:wght@400;700;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="shared.css" />
  <style>
    /* ‚îÄ‚îÄ‚îÄ HERO ‚îÄ‚îÄ‚îÄ */
    .hero {
      padding: 5rem 2rem 4rem;
      max-width: 1200px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 4rem;
      align-items: center;
    }
    .hero-label { font-size: 0.68rem; letter-spacing: 0.2em; text-transform: uppercase; color: var(--orange); margin-bottom: 1.5rem; }
    h1 { font-family: var(--display); font-weight: 800; font-size: clamp(2.8rem, 5vw, 4.5rem); line-height: 1.0; letter-spacing: -0.03em; margin-bottom: 1.5rem; }
    h1 em { font-style: normal; color: var(--orange); display: block; }
    .hero-desc { font-size: 0.85rem; line-height: 1.8; color: var(--muted); max-width: 420px; margin-bottom: 2.5rem; }
    .cta-row { display: flex; gap: 1rem; align-items: center; }

    /* Hero price card */
    .hero-card {
      background: var(--bg2); border: 1px solid var(--border); padding: 2rem;
      position: relative; animation: fadeUp 0.8s ease both 0.2s;
    }
    .hero-card::before { content:''; position:absolute; top:0; left:0; right:0; height:2px; background:var(--orange); }
    .card-label { font-size:0.65rem; letter-spacing:0.15em; text-transform:uppercase; color:var(--muted); margin-bottom:0.5rem; }
    .card-price { font-family:var(--display); font-size:2.8rem; font-weight:800; letter-spacing:-0.02em; color:var(--text); margin-bottom:0.25rem; }
    .card-change { font-size:0.8rem; color:var(--green); margin-bottom:2rem; }
    .card-change.negative { color:var(--red); }
    .mini-stats { display:grid; grid-template-columns:1fr 1fr; gap:1rem; margin-bottom:1.5rem; }
    .mini-stat-label { font-size:0.6rem; letter-spacing:0.15em; text-transform:uppercase; color:var(--muted); margin-bottom:0.2rem; }
    .mini-stat-val { font-size:0.9rem; color:var(--text); }
    .sparkline { width:100%; height:60px; margin-top:1rem; }

    /* ‚îÄ‚îÄ‚îÄ TOOLS MENU ‚îÄ‚îÄ‚îÄ */
    .tools-section {
      background: var(--bg3);
      border-top: 2px solid var(--orange);
      border-bottom: 1px solid var(--border);
    }
    .tools-intro { font-size:0.8rem; color:var(--muted); margin-bottom:3rem; max-width:600px; line-height:1.8; }

    /* ‚îÄ‚îÄ‚îÄ FEATURED TOOL ‚îÄ‚îÄ‚îÄ */
    .featured-tool {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 2rem;
      background: var(--bg);
      border: 1px solid var(--orange);
      padding: 2rem 2.5rem;
      margin-bottom: 2rem;
      position: relative;
      overflow: hidden;
      text-decoration: none;
      transition: background 0.2s;
    }
    .featured-tool::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, rgba(247,147,26,0.07) 0%, transparent 60%);
      pointer-events: none;
    }
    .featured-tool:hover { background: rgba(247,147,26,0.06); }
    .featured-tool-badge {
      font-family: var(--mono);
      font-size: 0.6rem;
      letter-spacing: 0.15em;
      color: var(--orange);
      background: rgba(247,147,26,0.12);
      border: 1px solid rgba(247,147,26,0.3);
      padding: 0.25rem 0.6rem;
      display: inline-block;
      margin-bottom: 0.75rem;
    }
    .featured-tool-title {
      font-family: var(--display);
      font-size: 1.6rem;
      font-weight: 800;
      color: var(--text);
      line-height: 1.1;
      margin-bottom: 0.5rem;
    }
    .featured-tool-desc {
      font-size: 0.8rem;
      color: var(--muted);
      line-height: 1.7;
      max-width: 480px;
    }
    .featured-tool-cta {
      flex-shrink: 0;
      font-family: var(--mono);
      font-size: 0.75rem;
      letter-spacing: 0.1em;
      color: var(--orange);
      border: 1px solid var(--orange);
      padding: 0.75rem 1.5rem;
      white-space: nowrap;
      transition: background 0.2s, color 0.2s;
    }
    .featured-tool:hover .featured-tool-cta {
      background: var(--orange);
      color: #000;
    }
    @media (max-width: 600px) {
      .featured-tool { flex-direction: column; align-items: flex-start; }
      .featured-tool-title { font-size: 1.2rem; }
    }

    .tools-menu {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1px;
      background: var(--border);
      border: 1px solid var(--border);
      margin-bottom: 3rem;
    }
    .tool-menu-item {
      background: var(--bg);
      padding: 1.75rem 2rem;
      text-decoration: none;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      transition: background 0.2s;
      position: relative;
      overflow: hidden;
    }
    .tool-menu-item::after {
      content: '‚Üí';
      position: absolute;
      right: 1.25rem;
      top: 50%;
      transform: translateY(-50%);
      color: var(--border);
      font-size: 1rem;
      transition: color 0.2s, right 0.2s;
    }
    .tool-menu-item:hover { background: var(--bg3); }
    .tool-menu-item:hover::after { color: var(--orange); right: 1rem; }
    .tool-menu-item:hover .tmi-num { color: var(--orange); }
    .tmi-num { font-size: 0.6rem; letter-spacing: 0.2em; text-transform: uppercase; color: var(--muted); font-family: var(--mono); transition: color 0.2s; }
    .tmi-icon { font-size: 1.4rem; margin: 0.25rem 0; }
    .tmi-name { font-family: var(--display); font-weight: 800; font-size: 1rem; color: var(--text); letter-spacing: -0.01em; }
    .tmi-desc { font-size: 0.7rem; color: var(--muted); line-height: 1.5; max-width: 220px; }

    /* ‚îÄ‚îÄ‚îÄ MARKET DATA ‚îÄ‚îÄ‚îÄ */
    .search-wrap { position: relative; margin-bottom: 2rem; }
    .search-input {
      width: 100%; background: var(--bg2); border: 1px solid var(--border);
      color: var(--text); font-family: var(--mono); font-size: 0.85rem;
      padding: 1rem 1rem 1rem 3rem; outline: none; transition: border-color 0.2s;
    }
    .search-input:focus { border-color: var(--orange); }
    .search-input::placeholder { color: var(--muted); }
    .search-icon { position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); color: var(--muted); font-size: 1rem; }

    /* Feature grid (learn section) */
    .feature-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 1px; background: var(--border); border: 1px solid var(--border); }
    .feature-card { background: var(--bg); padding: 2rem; transition: background 0.2s; }
    .feature-card:hover { background: var(--bg3); }
    .feature-icon { font-size: 1.5rem; margin-bottom: 1rem; }
    .feature-title { font-family: var(--display); font-weight: 700; font-size: 1rem; margin-bottom: 0.5rem; letter-spacing: -0.01em; }
    .feature-desc { font-size: 0.75rem; line-height: 1.7; color: var(--muted); }

    @media (max-width: 900px) {
      .hero { grid-template-columns: 1fr; gap: 2.5rem; padding: 3rem 1.5rem 2.5rem; }
      .tools-menu { grid-template-columns: 1fr 1fr; }
      .feature-grid { grid-template-columns: 1fr 1fr; }
    }
    @media (max-width: 600px) {
      .hero { padding: 2.5rem 1.25rem 2rem; gap: 2rem; }
      h1 { font-size: 2.8rem; }
      .hero-desc { font-size: 0.8rem; }
      .cta-row { flex-direction: column; align-items: flex-start; gap: 0.75rem; }
      .btn-primary, .btn-ghost { width: 100%; text-align: center; }
      .hero-card { padding: 1.25rem; }
      .card-price { font-size: 2rem; }
      .tools-menu { grid-template-columns: 1fr; }
      .feature-grid { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>

  <nav>
    <a class="logo" href="index.html">Bit<span>Depth</span></a>
    <ul class="nav-links">
      <li><a href="#tools" style="color:var(--orange)">‚öô Tools</a></li>
      <li><a href="#markets">Markets</a></li>
      <li><a href="#onchain">On-Chain</a></li>
      <li><a href="#mining">Mining</a></li>
      <li><a href="#lightning">Lightning</a></li>
      <li><a href="#macro">Macro</a></li>
      <li><a href="#bitcoin-101">Learn</a></li>
      <li><a href="https://x.com/btc_journey" target="_blank" rel="noopener" style="color:var(--orange)">ùïè @btc_journey</a></li>
    </ul>
    <div class="nav-status">
      <div class="status-dot"></div>
      <span id="nav-last-updated">LIVE DATA</span>
    </div>
  </nav>

  <div class="ticker-wrap">
    <div class="ticker">
      <span class="ticker-item"><span class="t-label">BTC/USD</span><span class="t-val" id="tick-price">‚Äî</span><span id="tick-change-1" class="t-up">‚Äî</span></span>
      <span class="ticker-item"><span class="t-label">HASH RATE</span><span class="t-val" id="tick-hashrate">‚Äî</span></span>
      <span class="ticker-item"><span class="t-label">DIFFICULTY</span><span class="t-val" id="tick-difficulty">‚Äî</span></span>
      <span class="ticker-item"><span class="t-label">MEMPOOL</span><span class="t-val" id="tick-mempool">‚Äî</span></span>
      <span class="ticker-item"><span class="t-label">NEXT HALVING</span><span class="t-val" id="tick-halving">‚Äî</span></span>
      <span class="ticker-item"><span class="t-label">CIRCULATING</span><span class="t-val" id="tick-supply">‚Äî</span></span>
      <span class="ticker-item"><span class="t-label">MARKET CAP</span><span class="t-val" id="tick-mcap">‚Äî</span><span id="tick-change-2" class="t-up">‚Äî</span></span>
      <span class="ticker-item"><span class="t-label">FEES (AVG)</span><span class="t-val" id="tick-fees">‚Äî</span></span>
      <span class="ticker-item"><span class="t-label">BTC/USD</span><span class="t-val" id="tick-price-2">‚Äî</span><span id="tick-change-3" class="t-up">‚Äî</span></span>
      <span class="ticker-item"><span class="t-label">HASH RATE</span><span class="t-val" id="tick-hashrate-2">‚Äî</span></span>
      <span class="ticker-item"><span class="t-label">DIFFICULTY</span><span class="t-val" id="tick-difficulty-2">‚Äî</span></span>
      <span class="ticker-item"><span class="t-label">MEMPOOL</span><span class="t-val" id="tick-mempool-2">‚Äî</span></span>
      <span class="ticker-item"><span class="t-label">NEXT HALVING</span><span class="t-val" id="tick-halving-2">‚Äî</span></span>
      <span class="ticker-item"><span class="t-label">CIRCULATING</span><span class="t-val" id="tick-supply-2">‚Äî</span></span>
      <span class="ticker-item"><span class="t-label">MARKET CAP</span><span class="t-val" id="tick-mcap-2">‚Äî</span><span id="tick-change-4" class="t-up">‚Äî</span></span>
      <span class="ticker-item"><span class="t-label">FEES (AVG)</span><span class="t-val" id="tick-fees-2">‚Äî</span></span>
    </div>
  </div>

  <!-- HERO -->
  <div class="hero">
    <div class="fade-in">
      <div class="hero-label">// Bitcoin Intelligence Platform</div>
      <h1>Go<br/>deeper<br/><em>than the chart.</em></h1>
      <p class="hero-desc">BitDepth aggregates on-chain data, market structure, mining metrics, and network fundamentals into one terminal-grade research environment. Built for people who want to actually understand Bitcoin.</p>
      <div class="cta-row">
        <a href="#tools" class="btn-primary">Explore Tools</a>
        <a href="#bitcoin-101" class="btn-ghost">Learn Bitcoin</a>
      </div>
    </div>
    <div class="hero-card fade-in delay-2">
      <div class="card-label">BTC / USD ‚Äî Live</div>
      <div class="card-price" id="hero-price">‚Äî</div>
      <div class="card-change" id="hero-change">loading...</div>
      <div class="mini-stats">
        <div class="mini-stat"><div class="mini-stat-label">24h High</div><div class="mini-stat-val" id="hero-high">‚Äî</div></div>
        <div class="mini-stat"><div class="mini-stat-label">24h Low</div><div class="mini-stat-val" id="hero-low">‚Äî</div></div>
        <div class="mini-stat"><div class="mini-stat-label">Volume</div><div class="mini-stat-val" id="hero-vol">‚Äî</div></div>
        <div class="mini-stat"><div class="mini-stat-label">Dominance</div><div class="mini-stat-val" id="hero-dom">‚Äî</div></div>
      </div>
      <svg id="sparkline-svg" class="sparkline" viewBox="0 0 300 60" preserveAspectRatio="none">
        <defs><linearGradient id="sparkGrad" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#f7931a" stop-opacity="0.3"/><stop offset="100%" stop-color="#f7931a" stop-opacity="0"/></linearGradient></defs>
        <polyline id="spark-line" points="" fill="none" stroke="#f7931a" stroke-width="1.5"/>
        <polygon id="spark-fill" points="" fill="url(#sparkGrad)"/>
      </svg>
      <div id="spark-label" style="font-size:0.6rem;color:var(--muted);text-align:right;margin-top:0.25rem">7-day price chart ‚Äî loading...</div>
    </div>
  </div>

  <!-- TOOLS MENU -->
  <div id="tools" class="tools-section">
    <section>
      <div class="section-header" style="border-bottom-color:var(--orange)">
        <div class="section-title" style="color:var(--orange)">BitDepth Tools</div>
        <div class="section-tag" style="color:var(--muted)">// interactive utilities ‚Äî built different</div>
      </div>
      <p class="tools-intro">These tools don't exist on CoinGecko or Mempool.space. Use them to make smarter decisions with live Bitcoin data.</p>

      <!-- FEATURED TOOL -->
      <a class="featured-tool" href="tool-regret.html">
        <div>
          <div class="featured-tool-badge">‚≠ê FEATURED TOOL</div>
          <div class="featured-tool-title">BTC Regret Calculator</div>
          <div class="featured-tool-desc">Pick any date. Enter any amount. See what you'd have today if you'd bought Bitcoin instead. Works all the way back to 2013 ‚Äî no API, no excuses.</div>
        </div>
        <div class="featured-tool-cta">TRY IT ‚Üí</div>
      </a>

      <div class="tools-menu">
        <a class="tool-menu-item" href="tool-satstack.html">
          <div class="tmi-num">Tool 01</div>
          <div class="tmi-icon">üìà</div>
          <div class="tmi-name">Sat Stack Calculator</div>
          <div class="tmi-desc">How many sats would you have stacked with regular DCA?</div>
        </a>
        <a class="tool-menu-item" href="tool-address.html">
          <div class="tmi-num">Tool 02</div>
          <div class="tmi-icon">üîç</div>
          <div class="tmi-name">Address Checker</div>
          <div class="tmi-desc">Check any Bitcoin address balance and transaction history.</div>
        </a>
        <a class="tool-menu-item" href="tool-inflation.html">
          <div class="tmi-num">Tool 03</div>
          <div class="tmi-icon">üí∏</div>
          <div class="tmi-name">Bitcoin vs Inflation</div>
          <div class="tmi-desc">What would $100 be worth today if you'd bought Bitcoin instead?</div>
        </a>
        <a class="tool-menu-item" href="tool-fee.html">
          <div class="tmi-num">Tool 04</div>
          <div class="tmi-icon">‚õΩ</div>
          <div class="tmi-name">Fee Estimator</div>
          <div class="tmi-desc">Live mempool fee rates. Pick urgency, get exact sat/vByte.</div>
        </a>
        <a class="tool-menu-item" href="tool-converter.html">
          <div class="tmi-num">Tool 05</div>
          <div class="tmi-icon">üîÑ</div>
          <div class="tmi-name">Sats Converter</div>
          <div class="tmi-desc">Instantly convert between USD, BTC, and satoshis.</div>
        </a>
        <a class="tool-menu-item" href="tool-halving.html">
          <div class="tmi-num">Tool 06</div>
          <div class="tmi-icon">üìâ</div>
          <div class="tmi-name">Halving Countdown</div>
          <div class="tmi-desc">Bitcoin's next supply shock, live to the second.</div>
        </a>
        <a class="tool-menu-item" href="tool-cheap.html">
          <div class="tmi-num">Tool 07</div>
          <div class="tmi-icon">üéØ</div>
          <div class="tmi-name">Is Bitcoin Cheap?</div>
          <div class="tmi-desc">One signal. No noise. Based on the Mayer Multiple.</div>
        </a>
        <a class="tool-menu-item" href="tool-alarm.html">
          <div class="tmi-num">Tool 08</div>
          <div class="tmi-icon">üîî</div>
          <div class="tmi-name">Fee Alarm</div>
          <div class="tmi-desc">Get alerted the moment mempool fees drop to your target.</div>
        </a>
        <a class="tool-menu-item" href="tool-signal.html">
          <div class="tmi-num">Tool 09</div>
          <div class="tmi-icon">üì°</div>
          <div class="tmi-name">Bitcoin Signal</div>
          <div class="tmi-desc">Four on-chain indicators into one score. Updated live.</div>
        </a>
        <a class="tool-menu-item" href="tool-regret.html">
          <div class="tmi-num">Tool 10</div>
          <div class="tmi-icon">üò¢</div>
          <div class="tmi-name">Regret Calculator</div>
          <div class="tmi-desc">What would your spend be worth in Bitcoin today?</div>
        </a>
      </div>
    </section>
  </div>

  <!-- MARKETS SECTION -->
  <div id="markets">
    <section>
      <div class="section-header">
        <div class="section-title">Market Overview</div>
        <div class="section-tag">// real-time</div>
      </div>
      <div class="stats-grid fade-in">
        <div class="stat-box"><div class="stat-box-label">Market Cap</div><div class="stat-box-val" id="mkt-cap">‚Äî</div><div class="stat-box-sub" id="mkt-cap-sub">loading...</div></div>
        <div class="stat-box"><div class="stat-box-label">24h Volume</div><div class="stat-box-val" id="mkt-vol">‚Äî</div><div class="stat-box-sub">across all exchanges</div></div>
        <div class="stat-box"><div class="stat-box-label">Sats per Dollar</div><div class="stat-box-val" id="mkt-sats">‚Äî</div><div class="stat-box-sub">sats per $1 USD</div></div>
        <div class="stat-box"><div class="stat-box-label">ATH Distance</div><div class="stat-box-val" id="mkt-ath">‚Äî</div><div class="stat-box-sub" id="mkt-ath-sub">from ATH</div></div>
      </div>
      <div class="search-wrap">
        <span class="search-icon">‚åï</span>
        <input class="search-input" id="explorer-search" type="text" placeholder="Search address, transaction ID, or block height..." />
      </div>
      <div class="data-table-wrap">
        <table class="data-table">
          <thead><tr><th>Exchange</th><th>BTC/USD</th><th>24h Change</th><th>Volume</th><th>Spread</th><th>Status</th></tr></thead>
          <tbody id="exchange-table-body"><tr><td colspan="6" style="color:var(--muted);text-align:center;padding:2rem">Loading exchange data...</td></tr></tbody>
        </table>
      </div>
    </section>
  </div>

  <!-- ON-CHAIN -->
  <div id="onchain">
    <section>
      <div class="section-header"><div class="section-title">On-Chain Metrics</div><div class="section-tag">// blockchain data</div></div>
      <div class="stats-grid">
        <div class="stat-box"><div class="stat-box-label">Block Height</div><div class="stat-box-val" id="chain-height">‚Äî</div><div class="stat-box-sub" id="chain-height-sub">loading...</div></div>
        <div class="stat-box"><div class="stat-box-label">Mempool Size</div><div class="stat-box-val" id="chain-mempool">‚Äî</div><div class="stat-box-sub" id="chain-mempool-sub">loading...</div></div>
        <div class="stat-box"><div class="stat-box-label">Avg Fee</div><div class="stat-box-val" id="chain-fee">‚Äî</div><div class="stat-box-sub">sat per vbyte</div></div>
        <div class="stat-box"><div class="stat-box-label">Unconfirmed Txs</div><div class="stat-box-val" id="chain-txs">‚Äî</div><div class="stat-box-sub">in mempool</div></div>
      </div>
      <div class="terminal" id="block-terminal"><span class="t-comment">// latest blocks ‚Äî loading...</span></div>
    </section>
  </div>

  <!-- MINING -->
  <div id="mining">
    <section>
      <div class="section-header"><div class="section-title">Mining Intelligence</div><div class="section-tag">// network security</div></div>
      <div class="stats-grid">
        <div class="stat-box"><div class="stat-box-label">Hash Rate</div><div class="stat-box-val" id="mine-hashrate">‚Äî</div><div class="stat-box-sub">7-day average</div></div>
        <div class="stat-box"><div class="stat-box-label">Difficulty</div><div class="stat-box-val" id="mine-difficulty">‚Äî</div><div class="stat-box-sub" id="mine-diff-sub">loading...</div></div>
        <div class="stat-box"><div class="stat-box-label">Block Reward</div><div class="stat-box-val">3.125</div><div class="stat-box-sub">BTC per block</div></div>
        <div class="stat-box"><div class="stat-box-label">Next Halving</div><div class="stat-box-val" id="mine-halving">‚Äî</div><div class="stat-box-sub" id="mine-halving-sub">loading...</div></div>
      </div>
      <div class="data-table-wrap">
        <table class="data-table">
          <thead><tr><th>Mining Pool</th><th>Blocks (24h)</th><th>Hash Share</th><th>Estimated Hashrate</th><th>Type</th></tr></thead>
          <tbody id="pool-table-body"><tr><td colspan="5" style="color:var(--muted);text-align:center;padding:2rem">Loading pool data...</td></tr></tbody>
        </table>
      </div>
    </section>
  </div>

  <!-- LIGHTNING -->
  <div id="lightning">
    <section>
      <div class="section-header"><div class="section-title">Lightning Network</div><div class="section-tag">// layer 2 payments</div></div>
      <div class="stats-grid">
        <div class="stat-box"><div class="stat-box-label">Total Capacity</div><div class="stat-box-val" id="ln-capacity">‚Äî</div><div class="stat-box-sub" id="ln-capacity-usd">loading...</div></div>
        <div class="stat-box"><div class="stat-box-label">Active Nodes</div><div class="stat-box-val" id="ln-nodes">‚Äî</div><div class="stat-box-sub">with active channels</div></div>
        <div class="stat-box"><div class="stat-box-label">Total Channels</div><div class="stat-box-val" id="ln-channels">‚Äî</div><div class="stat-box-sub">active payment channels</div></div>
        <div class="stat-box"><div class="stat-box-label">Avg Channel Size</div><div class="stat-box-val" id="ln-avg-size">‚Äî</div><div class="stat-box-sub">per channel</div></div>
      </div>
      <div class="data-table-wrap">
        <table class="data-table">
          <thead><tr><th>Node Alias</th><th>Capacity</th><th>Channels</th><th>Avg Channel</th><th>Location</th></tr></thead>
          <tbody id="ln-nodes-table"><tr><td colspan="5" style="color:var(--muted);text-align:center;padding:2rem">Loading node data...</td></tr></tbody>
        </table>
      </div>
    </section>
  </div>

  <!-- MACRO -->
  <div id="macro">
    <section>
      <div class="section-header"><div class="section-title">Macro & Cycles</div><div class="section-tag">// market intelligence</div></div>
      <div class="stats-grid" style="grid-template-columns:repeat(3,1fr)">
        <div class="stat-box"><div class="stat-box-label">Current Price</div><div class="stat-box-val" id="macro-price">‚Äî</div><div class="stat-box-sub">BTC/USD</div></div>
        <div class="stat-box"><div class="stat-box-label">200-Day MA</div><div class="stat-box-val" id="macro-ma200">‚Äî</div><div class="stat-box-sub">200-day moving average</div></div>
        <div class="stat-box"><div class="stat-box-label">Mayer Multiple</div><div class="stat-box-val" id="macro-mayer">‚Äî</div><div class="stat-box-sub" id="macro-mayer-sub">price √∑ 200-day MA</div></div>
      </div>
      <div style="background:var(--bg2);border:1px solid var(--border);padding:1.5rem;margin-bottom:1.5rem">
        <div style="font-size:0.65rem;letter-spacing:0.15em;text-transform:uppercase;color:var(--muted);margin-bottom:1rem">Mayer Multiple Signal</div>
        <div style="position:relative;height:8px;background:linear-gradient(to right,#3b82f6,#00d68f,#f7931a,#ff4d4d)">
          <div id="mayer-indicator" style="position:absolute;top:-4px;width:3px;height:16px;background:#fff;transition:left 0.8s ease;left:50%"></div>
        </div>
        <div style="display:flex;justify-content:space-between;margin-top:0.5rem;font-size:0.6rem;color:var(--muted)">
          <span>Undervalued &lt;0.8</span><span>Fair Value ~1.0</span><span>Overheated &gt;2.4</span>
        </div>
        <div id="mayer-signal-text" style="margin-top:1rem;font-size:0.8rem;color:var(--muted)">Loading signal...</div>
      </div>
      <div class="terminal" id="macro-terminal"><span class="t-comment">// macro analysis ‚Äî loading...</span></div>
    </section>
  </div>

  <!-- LEARN -->
  <div id="bitcoin-101">
    <section>
      <div class="section-header"><div class="section-title">Learn Bitcoin</div><div class="section-tag">// fundamentals</div></div>
      <div class="feature-grid">
        <div class="feature-card"><div class="feature-icon">‚Çø</div><div class="feature-title">What is Bitcoin?</div><div class="feature-desc">Bitcoin is a decentralized digital currency with no central bank or single administrator. Transactions are verified by a peer-to-peer network and recorded on a public ledger called the blockchain. Created by the pseudonymous Satoshi Nakamoto in 2009, it was the first cryptocurrency.</div></div>
        <div class="feature-card"><div class="feature-icon">üîí</div><div class="feature-title">The UTXO Model</div><div class="feature-desc">Bitcoin doesn't use account balances. Instead it uses Unspent Transaction Outputs (UTXOs) ‚Äî chunks of bitcoin tied to addresses. When you spend bitcoin, you consume UTXOs and create new ones as change. Your "balance" is just the sum of all UTXOs you control.</div></div>
        <div class="feature-card"><div class="feature-icon">‚õèÔ∏è</div><div class="feature-title">Proof of Work</div><div class="feature-desc">Miners compete to solve a cryptographic puzzle by hashing block data with a random nonce. The first to find a valid hash wins the block reward. This process secures the network ‚Äî rewriting history would require more computing power than all honest miners combined.</div></div>
        <div class="feature-card"><div class="feature-icon">üìâ</div><div class="feature-title">The Halving</div><div class="feature-desc">Every 210,000 blocks (~4 years), the block reward paid to miners is cut in half. Bitcoin launched with a 50 BTC reward. It's now 3.125 BTC after four halvings. This programmatic supply reduction continues until ~2140, when all 21 million BTC will have been issued.</div></div>
        <div class="feature-card"><div class="feature-icon">üì¶</div><div class="feature-title">SegWit & Taproot</div><div class="feature-desc">SegWit (2017) separated signature data from transaction data, fixing transaction malleability and increasing block capacity. Taproot (2021) added Schnorr signatures enabling more efficient multisig, better privacy, and smarter scripting ‚Äî Bitcoin's biggest upgrade in years.</div></div>
        <div class="feature-card"><div class="feature-icon">‚ö°</div><div class="feature-title">Lightning Network</div><div class="feature-desc">A Layer 2 payment protocol built on top of Bitcoin. Two parties open a payment channel by locking funds on-chain, then transact instantly and cheaply off-chain. Only the final balance is settled on the blockchain. Enables microtransactions and instant global payments.</div></div>
        <div class="feature-card"><div class="feature-icon">üîë</div><div class="feature-title">Keys & Wallets</div><div class="feature-desc">A Bitcoin wallet stores private keys, not coins. Your private key proves ownership and signs transactions. The public key (and derived address) is what others send to. "Not your keys, not your coins" ‚Äî if an exchange holds your keys, they control your bitcoin.</div></div>
        <div class="feature-card"><div class="feature-icon">üåê</div><div class="feature-title">Nodes & Consensus</div><div class="feature-desc">Full nodes download and verify every block and transaction, enforcing Bitcoin's rules independently. No authority controls the rules ‚Äî consensus emerges from thousands of nodes worldwide agreeing. Running a node is the most sovereign way to use Bitcoin.</div></div>
        <div class="feature-card"><div class="feature-icon">üìä</div><div class="feature-title">Reading the Mempool</div><div class="feature-desc">The mempool is a waiting room for unconfirmed transactions. Miners prioritize higher fee-rate transactions. When the mempool is congested, fees rise. When it clears, 1 sat/vB can get you confirmed. Watching mempool size helps you time transactions and save on fees.</div></div>
      </div>
    </section>
  </div>

  <!-- X FOLLOW CARD -->
  <div style="max-width:1200px;margin:0 auto;padding:0 2rem 3rem">
    <div style="background:var(--bg2);border:1px solid var(--border);padding:2rem;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:1.5rem;position:relative;overflow:hidden">
      <div style="position:absolute;top:0;left:0;right:0;height:2px;background:var(--orange)"></div>
      <div style="display:flex;align-items:center;gap:1.5rem">
        <div style="width:52px;height:52px;background:#000;border:1px solid var(--border);display:flex;align-items:center;justify-content:center;font-size:1.4rem;flex-shrink:0">ùïè</div>
        <div>
          <div style="font-family:var(--display);font-weight:800;font-size:1.1rem">@btc_journey</div>
          <div style="font-size:0.72rem;color:var(--muted);margin-top:0.2rem">Bitcoin analysis, on-chain data, and market intelligence</div>
        </div>
      </div>
      <a href="https://x.com/btc_journey" target="_blank" rel="noopener" style="background:var(--orange);color:#000;padding:0.7rem 1.75rem;font-family:var(--mono);font-size:0.72rem;font-weight:700;letter-spacing:0.1em;text-transform:uppercase;text-decoration:none" onmouseover="this.style.background='#ffad3b'" onmouseout="this.style.background='var(--orange)'">Follow on ùïè</a>
    </div>
  </div>

  <footer>
    <div><strong style="color:var(--text)">BitDepth</strong> &nbsp;‚Äî&nbsp; Bitcoin Tools & Live Market Intel</div>
    <div>Data is for informational purposes only. Not financial advice. &nbsp;|&nbsp; <a href="https://x.com/btc_journey" target="_blank" rel="noopener">ùïè @btc_journey</a> &nbsp;|&nbsp; <a href="https://github.com/phriar" target="_blank" rel="noopener">GitHub</a></div>
  </footer>

  <script src="shared.js"></script>
  <script>
    // ‚îÄ‚îÄ‚îÄ POOL TYPE LOOKUP ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    const poolTypes = { 'Foundry USA':'FPPS','AntPool':'PPS+','F2Pool':'PPS+','ViaBTC':'PPLNS','Binance Pool':'FPPS','Braiins Pool':'FPPS','Luxor':'FPPS','MARA Pool':'FPPS','SpiderPool':'PPS+','BTC.com':'PPS','SBICrypto':'PPS+','EMCDPool':'PPLNS' };

    // ‚îÄ‚îÄ‚îÄ SCROLL ANIMATIONS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    const observer = new IntersectionObserver(entries => {
      entries.forEach(e => { if (e.isIntersecting) { e.target.style.opacity='1'; e.target.style.transform='translateY(0)'; } });
    }, { threshold: 0.1 });
    document.querySelectorAll('.stat-box, .feature-card').forEach(el => {
      el.style.opacity='0'; el.style.transform='translateY(15px)'; el.style.transition='opacity 0.5s ease, transform 0.5s ease';
      observer.observe(el);
    });

    // ‚îÄ‚îÄ‚îÄ COINGECKO ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    async function fetchCoinGecko() {
      try {
        const res = await fetch('https://api.coingecko.com/api/v3/coins/bitcoin?localization=false&tickers=false&market_data=true&community_data=false&developer_data=false');
        const d = await res.json();
        const md = d.market_data;
        const price=md.current_price.usd, change24h=md.price_change_percentage_24h;
        $('hero-price').textContent = '$'+fmt(price);
        const delta = price*(change24h/100);
        const ch=$('hero-change');
        ch.textContent=(change24h>=0?'‚ñ≤ +':'‚ñº ')+change24h.toFixed(2)+'% ('+(change24h>=0?'+':'')+' $'+fmt(Math.abs(delta))+') today';
        ch.className='card-change'+(change24h<0?' negative':'');
        $('hero-high').textContent='$'+fmt(md.high_24h.usd);
        $('hero-low').textContent='$'+fmt(md.low_24h.usd);
        $('hero-vol').textContent=fmtUSD(md.total_volume.usd);
        $('mkt-cap').textContent=fmtUSD(md.market_cap.usd);
        $('mkt-cap-sub').textContent=(change24h>=0?'+':'')+change24h.toFixed(2)+'% 24h';
        $('mkt-vol').textContent=fmtUSD(md.total_volume.usd);
        $('mkt-sats').textContent=fmt(Math.round(1e8/price));
        $('mkt-ath').textContent=md.ath_change_percentage.usd.toFixed(1)+'%';
        $('mkt-ath-sub').textContent='from $'+fmt(md.ath.usd)+' ATH';
        updateTicker({ price, change24h, supply: (md.circulating_supply/1e6).toFixed(2)+'M BTC', mcap: fmtUSD(md.market_cap.usd) });
        setBtcPrice(price);
        updateNavTime();
      } catch(e) { console.error('CoinGecko:', e); }
    }

    async function fetchCoinGeckoGlobal() {
      try {
        const res = await fetch('https://api.coingecko.com/api/v3/global');
        const d = await res.json();
        const dom = d.data.market_cap_percentage.btc;
        $('hero-dom').textContent = dom.toFixed(1)+'%';
      } catch(e) {}
    }

    async function fetchMempool() {
      try {
        const feesRes = await fetch('https://mempool.space/api/v1/fees/recommended');
        const fees = await feesRes.json();
        $('chain-fee').textContent=fees.halfHourFee+' s/vB';
        updateTicker({ fees: fees.halfHourFee+' sat/vB' });
        const mp = await (await fetch('https://mempool.space/api/mempool')).json();
        const mbSize=(mp.vsize/1e6).toFixed(1);
        $('chain-mempool').textContent=mbSize+' MB';
        $('chain-mempool-sub').textContent=fmt(mp.count)+' pending txs';
        $('chain-txs').textContent=fmt(mp.count);
        updateTicker({ mempool: mbSize+' MB' });
      } catch(e) {}
      try {
        const blocks = await (await fetch('https://mempool.space/api/v1/blocks')).json();
        const latest=blocks.slice(0,5);
        const height=latest[0].height;
        $('chain-height').textContent=fmt(height);
        $('chain-height-sub').textContent='last block ~'+Math.round((Date.now()/1000-latest[0].timestamp)/60)+' min ago';
        const nextHalving=Math.ceil(height/210000)*210000;
        const daysLeft=Math.round((nextHalving-height)*10/1440);
        const halvStr='~'+fmt(daysLeft)+'d';
        $('mine-halving').textContent=halvStr;
        $('mine-halving-sub').textContent='block '+fmt(nextHalving);
        updateTicker({ halving: halvStr });
        let html='<span class="t-comment">// latest blocks ‚Äî live from mempool.space</span><br/>';
        html+='<span class="t-cmd">$ bitdepth query block --latest 5</span><br/><br/>';
        latest.forEach(b=>{
          html+=`<span class="t-out">Block </span><span class="t-val">${fmt(b.height)}</span><span class="t-out"> ‚Äî ${fmt(b.tx_count)} txs ‚Äî fees: ${(b.extras?.totalFees/1e8).toFixed(3)||'‚Äî'} BTC ‚Äî size: ${(b.size/1e6).toFixed(2)} MB ‚Äî mined by: ${b.extras?.pool?.name||'Unknown'}</span><br/>`;
        });
        html+='<br/><span class="t-cmd" id="blink-cursor" style="display:inline-block;width:0.6em">‚ñà</span>';
        $('block-terminal').innerHTML=html;
        const cur=document.getElementById('blink-cursor');
        if(cur) setInterval(()=>{ cur.style.opacity=cur.style.opacity==='0'?'1':'0'; },600);
      } catch(e) {}
      try {
        const hr=await (await fetch('https://mempool.space/api/v1/mining/hashrate/3d')).json();
        if(hr.currentHashrate){ const ehs=(hr.currentHashrate/1e18).toFixed(1)+' EH/s'; $('mine-hashrate').textContent=ehs; updateTicker({hashrate:ehs}); }
        if(hr.currentDifficulty){ const dt=(hr.currentDifficulty/1e12).toFixed(1)+'T'; $('mine-difficulty').textContent=dt; updateTicker({difficulty:dt}); }
      } catch(e) {}
      try {
        const pools=await (await fetch('https://mempool.space/api/v1/mining/pools/24h')).json();
        const hr2=await (await fetch('https://mempool.space/api/v1/mining/hashrate/3d')).json();
        const totalBlocks=pools.pools.reduce((s,p)=>s+p.blockCount,0);
        const totalEH=hr2.currentHashrate?hr2.currentHashrate/1e18:null;
        let rows='';
        pools.pools.slice(0,8).forEach(p=>{
          const share=((p.blockCount/totalBlocks)*100).toFixed(1);
          const estEH=totalEH?((p.blockCount/totalBlocks)*totalEH).toFixed(1)+' EH/s':'‚Äî';
          const type=poolTypes[p.name]||'‚Äî';
          rows+=`<tr><td>${p.name}</td><td>${p.blockCount}</td><td>${share}%</td><td>${estEH}</td><td><span class="tag ${type!=='‚Äî'?'tag-orange':'tag-muted'}">${type}</span></td></tr>`;
        });
        $('pool-table-body').innerHTML=rows||'<tr><td colspan="5" style="color:var(--muted);text-align:center">No data</td></tr>';
        const da=await (await fetch('https://mempool.space/api/v1/difficulty-adjustment')).json();
        if(da.remainingBlocks) $('mine-diff-sub').textContent='next adj in ~'+da.remainingBlocks+' blocks';
      } catch(e) {}
    }

    async function fetchSparkline() {
      try {
        const ohlc=await (await fetch('https://api.coingecko.com/api/v3/coins/bitcoin/ohlc?vs_currency=usd&days=7')).json();
        const prices=ohlc.map(d=>d[4]);
        const minP=Math.min(...prices),maxP=Math.max(...prices),W=300,H=60,PAD=4;
        const toX=i=>(i/(prices.length-1))*W;
        const toY=p=>PAD+((maxP-p)/(maxP-minP))*(H-PAD*2);
        const pts=prices.map((p,i)=>`${toX(i).toFixed(1)},${toY(p).toFixed(1)}`).join(' ');
        document.getElementById('spark-line').setAttribute('points',pts);
        document.getElementById('spark-fill').setAttribute('points',pts+` ${W},${H} 0,${H}`);
        const pct=((prices[prices.length-1]-prices[0])/prices[0]*100).toFixed(1);
        document.getElementById('spark-label').innerHTML=`7-day price chart &nbsp;<span style="color:${pct>=0?'var(--green)':'var(--red)'}">${pct>=0?'+':''}${pct}%</span>`;
      } catch(e) { document.getElementById('spark-label').textContent='7-day chart unavailable'; }
    }

    async function fetchExchanges() {
      const tbody=$('exchange-table-body');
      const results=[];
      function makeRow(name,price,change,vol,spread,ok) {
        const cc=change>=0?'var(--green)':'var(--red)';
        return `<tr><td>${name}</td><td>$${fmt(price)}</td><td style="color:${cc}">${(change>=0?'+':'')+change.toFixed(2)}%</td><td>${vol?fmtUSD(vol):'‚Äî'}</td><td>${spread?'$'+spread.toFixed(2):'‚Äî'}</td><td><span class="tag ${ok?'tag-green':'tag-muted'}">${ok?'Active':'Error'}</span></td></tr>`;
      }
      await Promise.allSettled([
        fetch('https://api.exchange.coinbase.com/products/BTC-USD/stats').then(r=>r.json()).then(d=>results.push({name:'Coinbase',price:parseFloat(d.last),change:((parseFloat(d.last)-parseFloat(d.open))/parseFloat(d.open))*100,vol:parseFloat(d.volume)*parseFloat(d.last),spread:null,ok:true})),
        fetch('https://api.binance.com/api/v3/ticker/24hr?symbol=BTCUSDT').then(r=>r.json()).then(d=>results.push({name:'Binance',price:parseFloat(d.lastPrice),change:parseFloat(d.priceChangePercent),vol:parseFloat(d.quoteVolume),spread:parseFloat(d.askPrice)-parseFloat(d.bidPrice),ok:true})),
        fetch('https://api.kraken.com/0/public/Ticker?pair=XBTUSD').then(r=>r.json()).then(d=>{const t=d.result.XXBTZUSD;const p=parseFloat(t.c[0]);results.push({name:'Kraken',price:p,change:((p-parseFloat(t.o))/parseFloat(t.o))*100,vol:parseFloat(t.v[1])*p,spread:parseFloat(t.a[0])-parseFloat(t.b[0]),ok:true});}),
        fetch('https://www.bitstamp.net/api/v2/ticker/btcusd/').then(r=>r.json()).then(d=>{const p=parseFloat(d.last);results.push({name:'Bitstamp',price:p,change:((p-parseFloat(d.open))/parseFloat(d.open))*100,vol:parseFloat(d.volume)*p,spread:parseFloat(d.ask)-parseFloat(d.bid),ok:true});}),
        fetch('https://www.okx.com/api/v5/market/ticker?instId=BTC-USDT').then(r=>r.json()).then(d=>{const t=d.data[0];const p=parseFloat(t.last);results.push({name:'OKX',price:p,change:((p-parseFloat(t.open24h))/parseFloat(t.open24h))*100,vol:parseFloat(t.volCcy24h)*p,spread:parseFloat(t.askPx)-parseFloat(t.bidPx),ok:true});})
      ]);
      const order=['Binance','Coinbase','Kraken','OKX','Bitstamp'];
      results.sort((a,b)=>order.indexOf(a.name)-order.indexOf(b.name));
      tbody.innerHTML=results.length?results.map(r=>makeRow(r.name,r.price,r.change,r.vol,r.spread,r.ok)).join(''):'<tr><td colspan="6" style="color:var(--muted);text-align:center;padding:1rem">Could not load exchange data</td></tr>';
    }

    async function fetchLightning() {
      try {
        const d=await (await fetch('https://mempool.space/api/v1/lightning/statistics/latest')).json();
        const capBTC=(d.latest.total_capacity/1e8).toFixed(0);
        $('ln-capacity').textContent=fmt(parseInt(capBTC))+' BTC';
        $('ln-nodes').textContent=d.latest.node_count.toLocaleString();
        $('ln-channels').textContent=d.latest.channel_count.toLocaleString();
        $('ln-avg-size').textContent=fmt(Math.round(d.latest.total_capacity/d.latest.channel_count))+' sats';
        const priceEl=$('hero-price');
        if(priceEl&&priceEl.textContent!=='‚Äî'){
          const p=parseFloat(priceEl.textContent.replace(/[$,]/g,''));
          $('ln-capacity-usd').textContent=fmtUSD(parseInt(capBTC)*p)+' USD';
        }
      } catch(e) {}
      try {
        const nodes=await (await fetch('https://mempool.space/api/v1/lightning/nodes/rankings/connectivity')).json();
        let rows='';
        nodes.slice(0,8).forEach(n=>{
          rows+=`<tr><td style="font-family:var(--mono);max-width:200px;overflow:hidden;text-overflow:ellipsis">${n.alias||n.public_key.slice(0,16)+'...'}</td><td>${(n.capacity/1e8).toFixed(2)} BTC</td><td>${n.channels.toLocaleString()}</td><td>${fmt(Math.round(n.capacity/n.channels))} sats</td><td>${n.country?.en||'‚Äî'}</td></tr>`;
        });
        $('ln-nodes-table').innerHTML=rows||'<tr><td colspan="5" style="color:var(--muted);text-align:center">No data</td></tr>';
      } catch(e) {}
    }

    async function fetchMacro() {
      try {
        const d=await (await fetch('https://api.coingecko.com/api/v3/coins/bitcoin/market_chart?vs_currency=usd&days=200&interval=daily')).json();
        const prices=d.prices.map(p=>p[1]);
        if(prices.length<200) return;
        const ma200=prices.slice(-200).reduce((a,b)=>a+b,0)/200;
        const cp=prices[prices.length-1];
        const mayer=cp/ma200;
        const pctAboveMA=((cp-ma200)/ma200*100).toFixed(1);
        $('macro-price').textContent='$'+fmt(cp);
        $('macro-ma200').textContent='$'+fmt(Math.round(ma200));
        $('macro-mayer').textContent=mayer.toFixed(3);
        let signal,signalColor,advice;
        if(mayer<0.8){signal='DEEPLY UNDERVALUED';signalColor='#3b82f6';advice='Price is more than 20% below the 200-day MA. Historically a strong accumulation zone.';}
        else if(mayer<1.0){signal='BELOW AVERAGE';signalColor='#00d68f';advice='Price is below the 200-day MA. Historically a favorable zone for long-term buyers.';}
        else if(mayer<1.5){signal='FAIR VALUE';signalColor='#f7931a';advice='Price is near the 200-day MA. Neither cheap nor expensive by historical standards.';}
        else if(mayer<2.4){signal='ELEVATED';signalColor='#ff8c00';advice='Price is significantly above the 200-day MA. Exercise caution ‚Äî past cycles showed pullbacks from these levels.';}
        else{signal='OVERHEATED';signalColor='#ff4d4d';advice='Mayer Multiple above 2.4 ‚Äî historically a rare extreme. Previous cycle peaks occurred in this zone.';}
        $('macro-mayer-sub').textContent=signal;
        $('macro-mayer-sub').style.color=signalColor;
        const pct2=Math.max(0,Math.min(1,(mayer-0.4)/(3.0-0.4)))*100;
        $('mayer-indicator').style.left=pct2+'%';
        $('mayer-signal-text').innerHTML=`<span style="color:${signalColor};font-weight:700">${signal}</span> &nbsp;‚Äî&nbsp; ${advice}`;
        $('macro-terminal').innerHTML=`<span class="t-comment">// macro analysis ‚Äî 200-day moving average</span><br/><span class="t-cmd">$ bitdepth macro --indicator mayer-multiple</span><br/><br/><span class="t-out">Current Price   </span><span class="t-val">$${fmt(cp)}</span><br/><span class="t-out">200-Day MA      </span><span class="t-val">$${fmt(Math.round(ma200))}</span><br/><span class="t-out">% vs MA         </span><span style="color:${pctAboveMA>=0?'var(--green)':'var(--red)'}">${pctAboveMA>=0?'+':''}${pctAboveMA}%</span><br/><span class="t-out">Mayer Multiple  </span><span class="t-val">${mayer.toFixed(4)}</span><br/><span class="t-out">Signal          </span><span style="color:${signalColor}">${signal}</span><br/><br/><span class="t-comment">// Values below 1.0 historically favor accumulation</span><br/><span class="t-cmd" id="mc" style="display:inline-block;width:0.6em">‚ñà</span>`;
        const mc=document.getElementById('mc');
        if(mc) setInterval(()=>{mc.style.opacity=mc.style.opacity==='0'?'1':'0';},600);
      } catch(e) {}
    }

    // ‚îÄ‚îÄ‚îÄ BLOCK EXPLORER SEARCH ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    $('explorer-search').addEventListener('keydown', function(e) {
      if(e.key!=='Enter') return;
      const q=this.value.trim(); if(!q) return;
      let url;
      if(/^[13][a-km-zA-HJ-NP-Z1-9]{25,34}$/.test(q)||/^bc1[a-z0-9]{6,87}$/i.test(q)) url=`https://mempool.space/address/${q}`;
      else if(/^[a-fA-F0-9]{64}$/.test(q)) url=`https://mempool.space/tx/${q}`;
      else if(/^\d+$/.test(q)) url=`https://mempool.space/block/${q}`;
      else url=`https://mempool.space/search?q=${encodeURIComponent(q)}`;
      window.open(url,'_blank','noopener');
    });

    async function init() {
      await Promise.allSettled([fetchCoinGecko(), fetchCoinGeckoGlobal(), fetchMempool(), fetchSparkline(), fetchExchanges(), fetchLightning(), fetchMacro()]);
    }
    init();
    setInterval(fetchCoinGecko, 60_000);
    setInterval(fetchCoinGeckoGlobal, 120_000);
    setInterval(fetchMempool, 120_000);
    setInterval(fetchExchanges, 30_000);
    setInterval(fetchSparkline, 600_000);
    setInterval(fetchLightning, 600_000);
    setInterval(fetchMacro, 600_000);
  </script>
</body>
</html>
